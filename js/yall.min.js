"use strict";var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},l=function(o,n){if("IMG"===o.tagName){var e=o.parentNode;if("PICTURE"===e.tagName)for(var t in[].slice.call(e.querySelectorAll("source")).forEach(function(e){for(var t in e.dataset)e.setAttribute(t,e.dataset[t]),e.removeAttribute("data-"+t)}),o.dataset)o.setAttribute(t,o.dataset[t]),o.removeAttribute("data-"+t);else{var a=new Image;if(void 0!==o.dataset.srcset&&(a.srcset=o.dataset.srcset),a.src=o.dataset.src,!0===n.asyncDecodeSupport)a.decode().then(function(){for(var e=0;e<o.attributes.length;e++){var t=o.attributes[e].name,r=o.attributes[e].value;-1===n.ignoredImgAttributes.indexOf(t)&&a.setAttribute(t,r)}o.replaceWith(a)});else for(var r in o.dataset)o.setAttribute(r,o.dataset[r]),o.removeAttribute("data-"+r)}}"VIDEO"===o.tagName&&([].slice.call(o.querySelectorAll("source")).forEach(function(e){for(var t in e.dataset)e.setAttribute(t,e.dataset[t]),e.removeAttribute("data-"+t)}),o.load()),"IFRAME"===o.tagName&&(o.src=o.dataset.src,o.removeAttribute("data-src"))},yall=function(e){var o={intersectionObserverSupport:"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,mutationObserverSupport:"MutationObserver"in window,idleCallbackSupport:"requestIdleCallback"in window,asyncDecodeSupport:"decode"in new Image,ignoredImgAttributes:["data-src","data-srcset","src","srcset"],eventsToBind:[[document,"scroll"],[document,"touchmove"],[window,"resize"],[window,"orientationchange"]]},n=c({lazyClass:"lazy",throttleTime:200,idlyLoad:!1,idleLoadTimeout:100,threshold:200,observeChanges:!1,observeRootSelector:"body",mutationObserverOptions:{childList:!0}},e),t="img."+n.lazyClass+",video."+n.lazyClass+",iframe."+n.lazyClass,a={timeout:n.idleLoadTimeout},i=[].slice.call(document.querySelectorAll(t));if(!0===o.intersectionObserverSupport){var r=new IntersectionObserver(function(e,r){e.forEach(function(e){var t=e.target;!0===e.isIntersecting&&(!0===n.idlyLoad&&!0===o.idleCallbackSupport?requestIdleCallback(function(){l(t,o)},a):l(t,o),t.classList.remove(n.lazyClass),r.unobserve(t),i=i.filter(function(e){return e!==t}))})},{rootMargin:n.threshold+"px 0%"});i.forEach(function(e){return r.observe(e)})}else{var s=function yallBack(){var e=!1;!1===e&&0<i.length&&(e=!0,setTimeout(function(){i.forEach(function(t){t.getBoundingClientRect().top<=window.innerHeight+n.threshold&&t.getBoundingClientRect().bottom>=-n.threshold&&"none"!==getComputedStyle(t).display&&(!0===n.idlyLoad&&!0===o.idleCallbackSupport?requestIdleCallback(function(){l(t,o)},a):l(t,o),t.classList.remove(n.lazyClass),i=i.filter(function(e){return e!==t}))}),e=!1,0===i.length&&!1===n.observeChanges&&o.eventsToBind.forEach(function(e){return e[0].removeEventListener(e[1],yallBack)})},n.throttleTime))};o.eventsToBind.forEach(function(e){return e[0].addEventListener(e[1],s)})}!0===o.mutationObserverSupport&&!0===n.observeChanges&&new MutationObserver(function(e){e.forEach(function(e){[].slice.call(document.querySelectorAll(t)).forEach(function(e){-1===i.indexOf(e)&&(i.push(e),!0===o.intersectionObserverSupport?r.observe(e):s())})})}).observe(document.querySelector(n.observeRootSelector),n.mutationObserverOptions)};
